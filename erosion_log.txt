warning: unused variable: `pass`
   --> src/erosion/rivers.rs:498:9
    |
498 |     for pass in 0..params.passes {
    |         ^^^^ help: if this is intentional, prefix it with an underscore: `_pass`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `river_params`
   --> src/erosion/mod.rs:115:13
    |
115 |         let river_params = RiverErosionParams {
    |             ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_river_params`

warning: unused variable: `seed`
   --> src/heightmap.rs:195:5
    |
195 |     seed: u64,
    |     ^^^^ help: if this is intentional, prefix it with an underscore: `_seed`

warning: unused variable: `seed`
   --> src/heightmap.rs:489:5
    |
489 |     seed: u64,
    |     ^^^^ help: if this is intentional, prefix it with an underscore: `_seed`

warning: constant `OCEAN_MODERATION` is never used
  --> src/climate.rs:20:7
   |
20 | const OCEAN_MODERATION: f32 = 0.3;
   |       ^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: struct `RiverPoint` is never constructed
  --> src/erosion/rivers.rs:42:8
   |
42 | struct RiverPoint {
   |        ^^^^^^^^^^

warning: function `lerp_color` is never used
   --> src/export.rs:402:4
    |
402 | fn lerp_color(a: [u8; 3], b: [u8; 3], t: f32) -> [u8; 3] {
    |    ^^^^^^^^^^

warning: function `render_land_mask` is never used
   --> src/export.rs:675:4
    |
675 | fn render_land_mask(_plate_map: &Tilemap<PlateId>, _plates: &[Plate], land_mask: &Tilemap<bool>) -> RgbImage {
    |    ^^^^^^^^^^^^^^^^

warning: constant `VOLCANIC_BASE` is never used
  --> src/heightmap.rs:62:7
   |
62 | const VOLCANIC_BASE: f32 = -500.0;       // Seamount base (underwater)
   |       ^^^^^^^^^^^^^

warning: constant `VOLCANIC_PEAK` is never used
  --> src/heightmap.rs:63:7
   |
63 | const VOLCANIC_PEAK: f32 = 800.0;        // Max island peak height
   |       ^^^^^^^^^^^^^

warning: constant `VOLCANIC_ISLAND_FREQ` is never used
  --> src/heightmap.rs:64:7
   |
64 | const VOLCANIC_ISLAND_FREQ: f64 = 0.12;  // Island clustering frequency (increased for more islands)
   |       ^^^^^^^^^^^^^^^^^^^^

warning: function `generate_coastal_islands` is never used
   --> src/heightmap.rs:278:4
    |
278 | fn generate_coastal_islands(
    |    ^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `smoothstep` is never used
   --> src/plates/stress.rs:143:4
    |
143 | fn smoothstep(edge0: f32, edge1: f32, x: f32) -> f32 {
    |    ^^^^^^^^^^

warning: `planet_generator` (lib) generated 13 warnings (run `cargo fix --lib -p planet_generator` to apply 4 suggestions)
warning: unused import: `RockType`
  --> src/erosion/mod.rs:15:21
   |
15 | pub use materials::{RockType, generate_material_map, generate_hardness_map};
   |                     ^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `add_wiggle`, `enhance_stress`, `smooth_stress`, and `spread_stress`
 --> src/plates/mod.rs:6:18
  |
6 | pub use stress::{add_wiggle, calculate_stress, enhance_stress, smooth_stress, spread_stress};
  |                  ^^^^^^^^^^                    ^^^^^^^^^^^^^^  ^^^^^^^^^^^^^  ^^^^^^^^^^^^^

warning: unused import: `Vec2`
 --> src/plates/mod.rs:7:44
  |
7 | pub use types::{Plate, PlateId, PlateType, Vec2};
  |                                            ^^^^

warning: field `steps_taken` is never read
  --> src/erosion/mod.rs:31:9
   |
25 | pub struct ErosionStats {
   |            ------------ field in this struct
...
31 |     pub steps_taken: u64,
   |         ^^^^^^^^^^^
   |
   = note: `ErosionStats` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: function `get_ice_thickness` is never used
   --> src/erosion/glacial.rs:335:8
    |
335 | pub fn get_ice_thickness(
    |        ^^^^^^^^^^^^^^^^^

warning: variant `Ice` is never constructed
  --> src/erosion/materials.rs:29:5
   |
14 | pub enum RockType {
   |          -------- variant in this enum
...
29 |     Ice,
   |     ^^^
   |
   = note: `RockType` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: methods `friability` and `color` are never used
  --> src/erosion/materials.rs:47:12
   |
32 | impl RockType {
   | ------------- methods in this implementation
...
47 |     pub fn friability(&self) -> f32 {
   |            ^^^^^^^^^^
...
52 |     pub fn color(&self) -> (u8, u8, u8) {
   |            ^^^^^

warning: function `export_material_map` is never used
   --> src/erosion/materials.rs:217:8
    |
217 | pub fn export_material_map(
    |        ^^^^^^^^^^^^^^^^^^^

warning: fields `ice_density` and `gravity` are never read
  --> src/erosion/params.rs:84:9
   |
 5 | pub struct ErosionParams {
   |            ------------- fields in this struct
...
84 |     pub ice_density: f32,
   |         ^^^^^^^^^^^
...
87 |     pub gravity: f32,
   |         ^^^^^^^
   |
   = note: `ErosionParams` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: associated items `fast`, `high_quality`, `hydraulic_only`, `glacial_only`, and `rho_g` are never used
   --> src/erosion/params.rs:185:12
    |
183 | impl ErosionParams {
    | ------------------ associated items in this implementation
184 |     /// Create a fast configuration for testing (fewer iterations)
185 |     pub fn fast() -> Self {
    |            ^^^^
...
194 |     pub fn high_quality() -> Self {
    |            ^^^^^^^^^^^^
...
203 |     pub fn hydraulic_only() -> Self {
    |            ^^^^^^^^^^^^^^
...
211 |     pub fn glacial_only() -> Self {
    |            ^^^^^^^^^^^^
...
219 |     pub fn rho_g(&self) -> f32 {
    |            ^^^^^

warning: function `get_flow_accumulation` is never used
   --> src/erosion/rivers.rs:604:8
    |
604 | pub fn get_flow_accumulation(heightmap: &Tilemap<f32>) -> Tilemap<f32> {
    |        ^^^^^^^^^^^^^^^^^^^^^

warning: function `gradient_at_cell` is never used
  --> src/erosion/utils.rs:79:8
   |
79 | pub fn gradient_at_cell(heightmap: &Tilemap<f32>, x: usize, y: usize) -> (f32, f32) {
   |        ^^^^^^^^^^^^^^^^

warning: function `apply_erosion_brush` is never used
   --> src/erosion/utils.rs:160:8
    |
160 | pub fn apply_erosion_brush(
    |        ^^^^^^^^^^^^^^^^^^^

warning: function `apply_deposit_brush` is never used
   --> src/erosion/utils.rs:180:8
    |
180 | pub fn apply_deposit_brush(
    |        ^^^^^^^^^^^^^^^^^^^

warning: function `smooth_tilemap` is never used
   --> src/erosion/utils.rs:228:8
    |
228 | pub fn smooth_tilemap(map: &Tilemap<f32>, radius: usize) -> Tilemap<f32> {
    |        ^^^^^^^^^^^^^^

warning: function `export_heightmap` is never used
  --> src/export.rs:11:8
   |
11 | pub fn export_heightmap(heightmap: &Tilemap<f32>, path: &str) -> Result<(), image::ImageError> {
   |        ^^^^^^^^^^^^^^^^

warning: function `export_plate_map` is never used
  --> src/export.rs:57:8
   |
57 | pub fn export_plate_map(
   |        ^^^^^^^^^^^^^^^^

warning: function `export_plate_types` is never used
  --> src/export.rs:81:8
   |
81 | pub fn export_plate_types(
   |        ^^^^^^^^^^^^^^^^^^

warning: function `export_stress_map` is never used
   --> src/export.rs:137:8
    |
137 | pub fn export_stress_map(stress_map: &Tilemap<f32>, path: &str) -> Result<(), image::ImageError> {
    |        ^^^^^^^^^^^^^^^^^

warning: function `export_globe` is never used
   --> src/export.rs:178:8
    |
178 | pub fn export_globe(
    |        ^^^^^^^^^^^^

warning: function `add_atmosphere_glow` is never used
   --> src/export.rs:261:4
    |
261 | fn add_atmosphere_glow(
    |    ^^^^^^^^^^^^^^^^^^^

warning: function `export_terrain_map` is never used
   --> src/export.rs:299:8
    |
299 | pub fn export_terrain_map(
    |        ^^^^^^^^^^^^^^^^^^

warning: function `ocean_color` is never used
   --> src/export.rs:391:4
    |
391 | fn ocean_color(height: f32) -> [u8; 3] {
    |    ^^^^^^^^^^^

warning: function `export_terrain_shaded` is never used
   --> src/export.rs:412:8
    |
412 | pub fn export_terrain_shaded(
    |        ^^^^^^^^^^^^^^^^^^^^^

warning: function `generate_combined_grid` is never used
   --> src/export.rs:572:8
    |
572 | pub fn generate_combined_grid(
    |        ^^^^^^^^^^^^^^^^^^^^^^

warning: function `enhance_stress` is never used
   --> src/plates/stress.rs:151:8
    |
151 | pub fn enhance_stress(
    |        ^^^^^^^^^^^^^^

warning: function `add_wiggle` is never used
   --> src/plates/stress.rs:192:8
    |
192 | pub fn add_wiggle(stress_map: &Tilemap<f32>) -> Tilemap<f32> {
    |        ^^^^^^^^^^

warning: function `smooth_stress` is never used
   --> src/plates/stress.rs:232:8
    |
232 | pub fn smooth_stress(stress_map: &Tilemap<f32>, radius: usize, sigma: f32) -> Tilemap<f32> {
    |        ^^^^^^^^^^^^^

warning: function `generate_gaussian_kernel` is never used
   --> src/plates/stress.rs:284:4
    |
284 | fn generate_gaussian_kernel(radius: usize, sigma: f32) -> Vec<f32> {
    |    ^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `spread_stress` is never used
   --> src/plates/stress.rs:302:8
    |
302 | pub fn spread_stress(
    |        ^^^^^^^^^^^^^

warning: methods `dot` and `normalize` are never used
  --> src/plates/types.rs:37:12
   |
32 | impl Vec2 {
   | --------- methods in this implementation
...
37 |     pub fn dot(&self, other: &Vec2) -> f32 {
   |            ^^^
...
45 |     pub fn normalize(&self) -> Self {
   |            ^^^^^^^^^

warning: fields `id` and `base_elevation` are never read
  --> src/plates/types.rs:61:9
   |
60 | pub struct Plate {
   |            ----- fields in this struct
61 |     pub id: PlateId,
   |         ^^
...
64 |     pub base_elevation: f32,
   |         ^^^^^^^^^^^^^^
   |
   = note: `Plate` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: associated function `new` is never used
  --> src/tilemap.rs:10:12
   |
 9 | impl<T: Clone + Default> Tilemap<T> {
   | ----------------------------------- associated function in this implementation
10 |     pub fn new(width: usize, height: usize) -> Self {
   |            ^^^

warning: methods `get_mut` and `iter_mut` are never used
  --> src/tilemap.rs:38:12
   |
19 | impl<T: Clone> Tilemap<T> {
   | ------------------------- methods in this implementation
...
38 |     pub fn get_mut(&mut self, x: usize, y: usize) -> &mut T {
   |            ^^^^^^^
...
90 |     pub fn iter_mut(&mut self) -> impl Iterator<Item = (usize, usize, &mut T)> {
   |            ^^^^^^^^

warning: field `heightmap_normalized` is never read
  --> src/viewer.rs:37:5
   |
35 | struct PlanetData {
   |        ---------- field in this struct
36 |     heightmap: Tilemap<f32>,
37 |     heightmap_normalized: Tilemap<f32>,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: `planet_generator` (bin "planet_generator") generated 48 warnings (13 duplicates) (run `cargo fix --bin "planet_generator" -p planet_generator` to apply 3 suggestions)
    Finished `release` profile [optimized] target(s) in 0.04s
     Running `target/release/planet_generator --seed 42 --erosion --output erosion_test.png`
Generating planet with seed: 42
Map size: 512x256
Generating tectonic plates...
Created 19 plates (7 continental, 12 oceanic)
Calculating plate stress...
Generating heightmap...
Land mask: 33272 cells are land (25.4%)
Heightmap range: -3969.9m to 711.9m (24.7% above sea level)
Generating climate...
Temperature range: -30.0°C to 30.0°C
Simulating erosion...
filled_map is valid (0 pits).
DEBUG: flow_acc max=16719.0. Found 3086 river sources.
Debug: River source (72, 123) ended in pit at (72, 123) len=1 h=103.4
Debug: River source (307, 142) ended in pit at (307, 142) len=1 h=98.0
Debug: River source (39, 196) ended in pit at (39, 196) len=1 h=86.6
Debug: River source (331, 221) ended in pit at (331, 221) len=1 h=195.1
Debug: River source (318, 143) ended in pit at (318, 143) len=1 h=92.0
Debug: River source (341, 156) ended in pit at (341, 156) len=1 h=206.2
Debug: River source (309, 169) ended in pit at (309, 169) len=1 h=202.8
Debug: River source (342, 173) ended in pit at (342, 173) len=1 h=78.9
Debug: River source (320, 193) ended in pit at (320, 193) len=1 h=69.0
Debug: River source (360, 213) ended in pit at (360, 213) len=1 h=135.0
Debug: River source (293, 150) ended in pit at (293, 150) len=1 h=99.1
Debug: River source (285, 189) ended in pit at (285, 189) len=1 h=374.2
Debug: River source (34, 206) ended in pit at (34, 206) len=1 h=123.6
Debug: River source (289, 221) ended in pit at (289, 221) len=1 h=111.1
Debug: River source (376, 32) ended in pit at (376, 32) len=1 h=50.3
Debug: River source (307, 53) ended in pit at (307, 53) len=1 h=64.2
Debug: River source (361, 80) ended in pit at (361, 80) len=1 h=270.6
Debug: River source (339, 153) ended in pit at (339, 153) len=1 h=274.3
Debug: River source (312, 170) ended in pit at (312, 170) len=1 h=211.5
Debug: River source (341, 205) ended in pit at (341, 205) len=1 h=197.5
Debug: River source (97, 209) ended in pit at (97, 209) len=1 h=76.6
Debug: River source (417, 255) ended in pit at (417, 255) len=1 h=364.1
Debug: River source (288, 86) ended in pit at (288, 86) len=1 h=118.0
Debug: River source (307, 141) ended in pit at (307, 142) len=2 h=98.0
Debug: River source (310, 161) ended in pit at (310, 161) len=1 h=161.1
Debug: River source (276, 162) ended in pit at (276, 162) len=1 h=356.5
Debug: River source (292, 184) ended in pit at (292, 184) len=1 h=230.2
Debug: River source (50, 194) ended in pit at (50, 194) len=1 h=368.5
Debug: River source (332, 216) ended in pit at (332, 216) len=1 h=53.1
Debug: River source (411, 219) ended in pit at (411, 219) len=1 h=90.0
River Network Analysis:
  Rivers found: 66
  Connected to ocean: 36 (54.5%)
  Ending in pits: 30
  Mean length: 1.8 pixels
  Max length: 5 pixels
Erosion complete:
  Total eroded: 281013221.7 units
  Total deposited: 271087907.4 units
  Max erosion: 100.00 units
  Max deposition: 30.00 units
Post-erosion heightmap range: -3978.6m to 2000.0m
Exporting combined grid to erosion_test.png.png...
Done!
